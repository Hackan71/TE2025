<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Abfindungsrechner</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #8c8c8c; /* 55% Schwarz */
      color: white;
      max-width: 800px;
      margin: auto;
    }
    h1, h2 {
      color: white;
    }
    h2 {
      font-size: 1.2em;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .field-group {
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 10px;
    }
    input[type="number"], input[type="text"] {
      background-color: #999999; /* 40% Schwarz */
      color: white;
      border: 1px solid #bfbfbf; /* 75% Schwarz */
      padding: 8px;
      flex: 1;
    }
    input[type="number"]::placeholder,
    input[type="text"]::placeholder {
      color: #e6e6e6; /* 10% Schwarz */
    }
    input[type="number"]:focus,
    input[type="text"]:focus {
      border-color: orange;
      outline: none;
    }
    .checkbox-label {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    input[type="checkbox"] {
      width: 20px;
      height: 20px;
      accent-color: orange;
    }
    .output {
      font-weight: bold;
    }
    .info {
      margin-top: 20px;
      font-size: 0.9em;
      color: #ccc;
    }
    .output-field {
      background-color: transparent;
      border: none;
      color: white;
      font-weight: bold;
    }
    button {
      padding: 10px;
      margin-top: 10px;
      font-size: 1em;
      cursor: pointer;
      border: none;
    }
    #resetBtn {
      background-color: #666;
      color: white;
    }
    #berechnenBtn {
      background-color: orange;
      color: white;
    }
  </style>
</head>
<body>
  <h1>Rahmensozialplan – Abfindungsrechner</h1>
  <form id="rechnerForm">
    <input type="number" id="alter" placeholder="Vollendetes Alter" min="16" max="66">
    <output class="output-field" id="abfaktor"></output>
    <input type="number" id="betriebszu" placeholder="Betriebszugehörigkeit (Jahre)" min="1" max="50">
    <input type="number" id="teilzeit" placeholder="davon Jahre in Teilzeit" min="0">
    <input type="number" id="gehaltTeilzeit" placeholder="Bruttomonatsgehalt in Teilzeit (€)">
    <input type="number" id="gehaltVollzeit" placeholder="Bruttomonatsgehalt in Vollzeit (€)">
    <output class="output-field" id="bruttoInfo"></output>
    <output class="output-field" id="outplacement"></output>
    <output class="output-field" id="abfindungSumme"></output>
    <input type="number" id="kinder" placeholder="Kinder unter 27 Jahre" min="0" max="10">
    <label class="checkbox-label"><input type="checkbox" id="alleinerziehend">Alleinerziehend</label>
    <label class="checkbox-label"><input type="checkbox" id="schwerbehindert">Schwerbehinderung</label>
    <label class="checkbox-label"><input type="checkbox" id="gleichstellung">Gleichstellung</label>
    <label class="checkbox-label"><input type="checkbox" id="freiwillig"><h2>Freiwilligenprogramm</h2></label>
    <output class="output-field" id="zusatzfaktor"></output>
    <output class="output-field" id="freiZusatz"></output>
    <output class="output-field" id="sockelErhoehung"></output>
    <output class="output-field" id="kapitalisierung"></output>
    <h2 id="bruttoGesamt"></h2>
    <button type="button" id="berechnenBtn" onclick="berechne()">Berechnen</button>
    <button type="button" id="resetBtn" onclick="resetForm()">Zurücksetzen</button>
  </form>

  <div class="info">
    Dieser Rechner dient nur zu Informationszwecken. Keine Gewähr auf Richtigkeit. <br>
    Erstellt von Hakan Tokat, Stand: 10.06.2025
  </div>

  <script>
    function berechne() {
      const alter = parseInt(document.getElementById("alter").value) || 0;
      const zu = parseInt(document.getElementById("betriebszu").value) || 0;
      const teilzeit = parseInt(document.getElementById("teilzeit").value) || 0;
      const gehaltT = parseFloat(document.getElementById("gehaltTeilzeit").value) || 0;
      const gehaltV = parseFloat(document.getElementById("gehaltVollzeit").value) || 0;
      const kinder = parseInt(document.getElementById("kinder").value) || 0;
      const alleinerziehend = document.getElementById("alleinerziehend").checked;
      const schwerbehindert = document.getElementById("schwerbehindert").checked;
      const gleichstellung = document.getElementById("gleichstellung").checked;
      const freiwillig = document.getElementById("freiwillig").checked;

      if (schwerbehindert && gleichstellung) {
        alert("Schwerbehinderung und Gleichstellung dürfen nicht gleichzeitig gewählt werden.");
        return;
      }

      const faktor = alter < 30 ? 0.7 : alter <= 39 ? 0.8 : alter <= 49 ? 0.9 : 1;
      document.getElementById("abfaktor").textContent = `Abfindungsfaktor: ${faktor.toFixed(2)}`;

      const anteilT = ((zu - teilzeit) <= zu * 2 / 3) ? (teilzeit / zu * gehaltT) : 0;
      const anteilV = anteilT === 0 ? gehaltV : ((zu - teilzeit) / zu * gehaltV);
      const brutto = anteilT + anteilV;
      const fiktivText = anteilT === 0 ? "Bruttomonatsgehalt: " : "Fiktives Bruttogehalt: ";
      document.getElementById("bruttoInfo").textContent = `${fiktivText} (${brutto.toFixed(0)}×13,27/12)`;

      const basis = Math.round(brutto * 13.27 / 12);
      const abfindung = Math.min(basis * zu * faktor, 250000);

      const kinderBonus = kinder * 4000;
      const allein = alleinerziehend ? 6000 : 0;
      const schwer = schwerbehindert ? 6000 : 0;
      const gleich = gleichstellung ? 3000 : 0;

      const outplace = freiwillig ? 0 : (zu <= 10 ? 5000 : zu <= 15 ? 7500 : zu <= 20 ? 10000 : zu <= 25 ? 12500 : 15000);
      document.getElementById("outplacement").textContent = `Outplacement: ${outplace.toLocaleString("de-DE")} €`;

      document.getElementById("abfindungSumme").textContent = `Abfindungssumme: ${abfindung.toLocaleString("de-DE")} €`;

      const zusatzFaktor = freiwillig ? 0.3 : 0;
      document.getElementById("zusatzfaktor").textContent = freiwillig ? `Zusatzfaktor: ${zusatzFaktor}` : "";

      const zusatzAbf = freiwillig ? Math.min(Math.round(basis * zu * zusatzFaktor), 150000) : 0;
      document.getElementById("freiZusatz").textContent = zusatzAbf ? `Freiwillige Zusatzabfindung: ${zusatzAbf.toLocaleString("de-DE")} €` : "";

      let sockelErh = 0;
      if (freiwillig) {
        sockelErh = alter < 30 ? 0 : alter < 40 ? 7500 : alter < 50 ? 10000 : alter < 60 ? 12500 : 15000;
      }
      document.getElementById("sockelErhoehung").textContent = sockelErh ? `Erhöhung Sockelbetrag: ${sockelErh.toLocaleString("de-DE")} €` : "";

      const kapitalisierung = freiwillig ? (zu <= 10 ? 5000 : zu <= 15 ? 7500 : zu <= 20 ? 10000 : zu <= 25 ? 12500 : 15000) : 0;
      document.getElementById("kapitalisierung").textContent = kapitalisierung ? `Kapitalisierung Outplacement: ${kapitalisierung.toLocaleString("de-DE")} €` : "";

      const sockelbetrag = (freiwillig && alter >= 30) ? 0 : 5000;
      const gesamt = abfindung + kinderBonus + allein + schwer + gleich + outplace + zusatzAbf + sockelErh + kapitalisierung + sockelbetrag;
      document.getElementById("bruttoGesamt").textContent = `Gesamte Bruttoabfindung: ${gesamt.toLocaleString("de-DE")} €`;
    }

    function resetForm() {
      document.getElementById("rechnerForm").reset();
      const outputs = ["abfaktor", "bruttoInfo", "outplacement", "abfindungSumme", "zusatzfaktor", "freiZusatz", "sockelErhoehung", "kapitalisierung", "bruttoGesamt"];
      outputs.forEach(id => document.getElementById(id).textContent = "");
    }
  </script>
</body>
</html>
